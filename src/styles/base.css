@import './tokens.css';
/* 多語字體：系統優先，避免大體積 webfont；以 :lang() 精準套用 */
:root { --qp-font-size-base: 16px; --qp-line-height: 1.5; }
html { font-size: var(--qp-font-size-base); line-height: var(--qp-line-height); }

:lang(en), :lang(de), :lang(fr) {
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans", "Inter", Arial, sans-serif;
  letter-spacing: 0.01em;
}

:lang(ja) {
  font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic ProN", "Noto Sans JP", "Yu Gothic", "Meiryo", sans-serif;
  letter-spacing: 0.02em; /* 日文稍加字距 */
}

:lang(ko) {
  font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Malgun Gothic", "Noto Sans KR", Roboto, sans-serif;
}

:lang(zh-Hant), :lang(zh-hant) {
  font-family: -apple-system, "PingFang TC", "Noto Sans TC", "Heiti TC", "Microsoft JhengHei", sans-serif;
}

:lang(zh-Hans), :lang(zh-hans) {
  font-family: -apple-system, "PingFang SC", "Noto Sans SC", "Microsoft Yahei", Roboto, sans-serif;
}

/* 互動與可用性 */
button, a, [role="button"] { min-height: 44px; min-width: 44px; }
@media (pointer: coarse) { button, a, [role="button"] { min-height: 48px; } }

/* 減少動態偏好 */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; }
}

/* ---- Minimal UI primitives ---- */
* { box-sizing: border-box; }
html, body { height: 100%; }
body { margin: 0; color: #111; background: #fafafa; }

.container { max-width: 720px; margin-inline: auto; padding-inline: 16px; padding-block: 16px; }

header.navbar { background: #fff; border-bottom: 1px solid #eee; position: sticky; top: 0; z-index: 10; }
.navbar .inner { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
.navbar a { color: inherit; text-decoration: none; padding: 8px 10px; border-radius: 8px; }
.navbar a:hover { background: #f2f2f2; }

.hero { padding-block: 32px 24px; }
.hero h1 { font-size: clamp(24px, 5vw, 32px); margin: 0 0 8px; line-height: 1.2; }
.hero p { margin: 0 0 16px; color: #333; }

.btn { display: inline-flex; align-items: center; justify-content: center; gap: 8px; padding: 10px 14px; border-radius: 10px; border: 1px solid #ddd; background: #fff; color: #111; cursor: pointer; text-decoration: none; }
.btn:hover { background: #f6f6f6; }
.btn-primary { background: #6c5ce7; color: #fff; border-color: #6c5ce7; }
.btn-primary:hover { filter: brightness(0.95); }

.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }

.room-shell { display: grid; gap: 20px; padding-block: 8px 24px; }
.room-meta-card { display: flex; flex-wrap: wrap; gap: 16px; align-items: center; padding: 16px; background: #f5f5f5; border: 1px solid #eee; border-radius: 12px; }
.room-meta-item { display: flex; align-items: center; gap: 8px; font-size: 0.95rem; }
.room-meta-label { font-weight: 600; color: #444; }
.room-meta-code { background: #fff; padding: 4px 8px; border-radius: 6px; border: 1px solid #e5e7eb; font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace; font-size: 0.85rem; }
.room-question-card { display: grid; gap: 16px; padding: 20px; background: #fff; border-radius: 14px; border: 1px solid #eee; box-shadow: 0 12px 32px rgba(17, 17, 17, 0.08); }
.room-question-text { margin: 0; font-size: clamp(20px, 4vw, 26px); line-height: 1.45; color: #1f2933; }
.room-progress-card { display: grid; gap: 10px; }
.room-progress-text { display: flex; align-items: center; justify-content: space-between; font-weight: 600; font-size: 0.95rem; color: #3d3a5a; }
.room-progress-percent { font-size: 0.9rem; font-weight: 600; color: #6c5ce7; }
.room-progress-meta { display: flex; align-items: center; justify-content: space-between; gap: 12px; flex-wrap: wrap; font-size: 0.85rem; color: #5f6472; }
.room-progress-remaining { font-weight: 600; font-size: 0.85rem; color: #4b3cc4; }
.room-timer { display: inline-flex; align-items: center; gap: 6px; font-weight: 600; }
.room-timer-label { font-size: 0.8rem; color: #5f6472; text-transform: uppercase; letter-spacing: 0.04em; }
.room-timer-value { font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace; font-size: 0.95rem; color: #2d334a; }
.room-timer-value.is-critical { color: #d62839; }
.room-progress-bar { width: 100%; height: 8px; border-radius: 999px; background: rgba(108, 92, 231, 0.18); overflow: hidden; }
.room-progress-bar-fill { height: 100%; background: #6c5ce7; transition: width 0.25s ease; }
.room-summary-card { display: grid; gap: 20px; padding: 24px; background: #fff; border: 1px solid #eee; border-radius: 16px; box-shadow: 0 12px 32px rgba(17, 17, 17, 0.08); }
.room-summary-header h2 { margin: 0; font-size: clamp(22px, 4vw, 28px); }
.room-summary-header p { margin: 0; color: #5f6472; font-size: 0.95rem; }
.room-summary-metrics { display: flex; flex-wrap: wrap; gap: 16px; }
.room-summary-metric { flex: 1 1 160px; display: grid; gap: 4px; padding: 16px; border-radius: 12px; background: rgba(108, 92, 231, 0.08); border: 1px solid rgba(108, 92, 231, 0.12); }
.room-summary-metric-value { font-size: 1.5rem; font-weight: 700; color: #2d334a; }
.room-summary-metric-label { font-size: 0.85rem; color: #5f6472; }
.room-summary-leaderboard { display: grid; gap: 12px; }
.room-summary-section-title { font-weight: 600; font-size: 1rem; color: #2d334a; }
.room-summary-table-wrapper { overflow-x: auto; }
.room-summary-table { width: 100%; min-width: 420px; border-collapse: collapse; }
.room-summary-table th,
.room-summary-table td { padding: 10px 12px; text-align: left; font-size: 0.9rem; border-bottom: 1px solid #edf0f7; }
.room-summary-table th { font-weight: 600; color: #4b5563; background: #f7f8ff; }
.room-summary-rank { width: 70px; font-weight: 600; color: #4b3cc4; }
.room-summary-player { font-weight: 600; color: #2d334a; }
.room-summary-player-id { margin-left: 6px; padding: 2px 6px; border-radius: 999px; background: rgba(108, 92, 231, 0.15); color: #4b3cc4; font-size: 0.75rem; }
.room-summary-correct,
.room-summary-total,
.room-summary-accuracy { width: 100px; text-align: right; }
.room-summary-empty { margin: 0; padding: 16px; border-radius: 12px; border: 1px dashed #d8dcf0; background: #fbfbff; color: #6b7280; font-size: 0.9rem; }
.room-summary-actions { display: flex; gap: 12px; margin-top: 4px; }
.room-summary-actions .btn { font-size: 0.9rem; }
.room-summary-player-chip { display: inline-flex; align-items: center; gap: 8px; }
.room-summary-player-chip img { width: 32px; height: 32px; border-radius: 50%; object-fit: cover; border: 1px solid #e5e7eb; }
.room-summary-score { width: 110px; text-align: right; font-weight: 600; color: #4b3cc4; }
.room-summary-time { width: 90px; text-align: right; font-variant-numeric: tabular-nums; }
.room-summary-cta { display: flex; gap: 12px; align-items: center; justify-content: space-between; padding: 14px 16px; border-radius: 12px; border: 1px solid rgba(108, 92, 231, 0.15); background: rgba(108, 92, 231, 0.07); color: #4b3cc4; font-size: 0.9rem; }
.room-summary-table-self { margin-top: 12px; }
.room-summary-table-self tbody tr.is-highlight { background: rgba(108, 92, 231, 0.12); }

.room-heroes { display: grid; gap: 12px; padding: 12px 16px; border: 1px solid #eee; border-radius: 14px; background: #fff; margin-bottom: 16px; box-shadow: 0 8px 24px rgba(17, 17, 17, 0.06); }
.room-heroes-header { display: flex; justify-content: space-between; align-items: center; gap: 12px; }
.room-heroes-text { display: grid; gap: 4px; }
.room-heroes-title { font-weight: 700; font-size: 1rem; color: #2d334a; }
.room-heroes-subtitle { font-size: 0.85rem; color: #5f6472; }
.room-heroes-avatars { display: flex; flex-wrap: wrap; gap: 10px; }
.room-hero-avatar { position: relative; width: 48px; height: 48px; border-radius: 50%; border: none; padding: 0; background: none; cursor: pointer; }
.room-hero-avatar img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; border: 2px solid #fff; box-shadow: 0 6px 12px rgba(17, 17, 17, 0.12); }
.room-hero-avatar:hover img { transform: translateY(-2px); transition: transform 0.15s ease, box-shadow 0.15s ease; box-shadow: 0 10px 22px rgba(17, 17, 17, 0.16); }
.room-hero-rank { position: absolute; bottom: -6px; right: -6px; background: #6c5ce7; color: #fff; border-radius: 999px; font-size: 0.7rem; padding: 2px 6px; box-shadow: 0 4px 10px rgba(108, 92, 231, 0.35); }
.room-heroes-empty { font-size: 0.9rem; color: #5f6472; padding: 12px 0; }
.room-heroes-cta { display: flex; gap: 10px; align-items: center; }

.room-modal { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; z-index: 100; }
.room-modal.is-active { display: flex; }
.room-modal-backdrop { position: absolute; inset: 0; background: rgba(15, 23, 42, 0.4); }
.room-modal-content { position: relative; background: #fff; border-radius: 18px; width: min(680px, calc(100vw - 32px)); max-height: calc(100vh - 80px); display: flex; flex-direction: column; box-shadow: 0 20px 60px rgba(15, 23, 42, 0.24); }
.room-modal-header { padding: 20px 24px; border-bottom: 1px solid #edf0f7; display: flex; align-items: center; justify-content: space-between; gap: 12px; }
.room-modal-header h3 { margin: 0; font-size: 1.1rem; }
.room-modal-body { padding: 20px 24px; overflow-y: auto; display: grid; gap: 16px; }
.room-modal-footer { font-size: 0.85rem; color: #5f6472; }

.room-summary-leaderboard-self .room-summary-table { margin: 0; }
.room-summary-table tbody tr.is-highlight { background: rgba(108, 92, 231, 0.12); }
.choice-grid { display: grid; gap: 12px; }
.choice-btn { position: relative; justify-content: flex-start; gap: 14px; padding: 14px 16px; border-width: 2px; border-color: #e0def9; transition: background 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease; }
.choice-btn .choice-index { width: 36px; height: 36px; border-radius: 50%; border: 2px solid #d8d6f8; background: #f6f5ff; color: #6c5ce7; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 1rem; flex-shrink: 0; }
.choice-btn .choice-text { flex: 1; text-align: left; font-size: 1rem; line-height: 1.45; }
.choice-btn .choice-selected { margin-left: auto; padding: 4px 10px; border-radius: 999px; background: rgba(108, 92, 231, 0.12); color: #4b3cc4; font-size: 0.75rem; font-weight: 600; }
.choice-btn:hover { transform: translateY(-1px); box-shadow: 0 8px 18px rgba(17, 17, 17, 0.08); border-color: #c7c3ff; }
.choice-btn.is-selected { border-color: #6c5ce7; background: rgba(108, 92, 231, 0.12); box-shadow: 0 10px 26px rgba(108, 92, 231, 0.24); }
.choice-btn.is-selected .choice-index { background: #6c5ce7; border-color: #6c5ce7; color: #fff; }
.choice-btn.is-submitting { opacity: 0.7; }
.room-next-button { justify-self: flex-start; }
.room-next-button:disabled { opacity: 0.6; }

@media (max-width: 600px) {
  .room-question-card { padding: 18px; }
  .choice-btn { padding: 12px 14px; }
  .choice-btn .choice-index { width: 32px; height: 32px; }
}


